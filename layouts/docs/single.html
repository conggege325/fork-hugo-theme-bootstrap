{{ define "content" }}
{{- partial "docs/nav" . -}}

{{- if eq .Params.isPrivate true -}}
<script>
  let myModal;
  $(function() {
    myModal = new bootstrap.Modal('#staticBackdrop', {
      keyboard: false
    })
    myModal.show()
  })

  function decrypt(ciphertext, key) {
    const decryptData = CryptoJS.AES.decrypt(ciphertext, CryptoJS.enc.Utf8.parse(key), {
      iv: CryptoJS.enc.Utf8.parse('{{ $.Site.Params.secretIv }}'),
      mode: CryptoJS.mode.CBC,
      padding: CryptoJS.pad.Pkcs7
    });
    const originalText = decryptData.toString(CryptoJS.enc.Utf8);
    return originalText;
  }

  function mySubmit () {
    let secretKey = 'congGG325';
    if (secretKey.length > 32) {
      secretKey = secretKey.substring(0, 32)
    } else if(secretKey.length < 32) {
      secretKey = secretKey.padEnd(32, '0')
    }
    const event = new CustomEvent('show_content', { detail: secretKey });
    document.dispatchEvent(event);
    myModal.hide()
  }
</script>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">请输入密码</h1>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="mySubmit()">确定</button>
      </div>
    </div>
  </div>
</div>
{{- end -}}

<div class="col ms-auto content-docs">
  <div class="container-fluid">
    {{- partial "breadcrumb" . -}}
    {{- partial "docs/post" . -}}
  </div>
</div>
{{- partial "docs/sidebar" . -}}
{{ end }}
